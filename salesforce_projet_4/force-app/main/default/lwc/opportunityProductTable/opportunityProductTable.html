<template>
    <lightning-card title="Opportunity Products" icon-name="standard:opportunity">
        <!-- Affiche le message d'avertissement si hasNegativeQuantity est vrai -->
        <template if:true={hasNegativeQuantity}>
            <div class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_warning slds-m-around_large">
                <span class="slds-assistive-text">Warning</span>
                <p>Vous avez au moins une ligne avec un problème de quantité. Veuillez supprimer cette ligne ou réduire sa quantité. Si vous avez absolument besoin de plus de produits, veuillez contacter votre administrateur système.</p>
            </div>
        </template>

        <!-- Affiche le tableau si des produits sont disponibles -->
        <template if:true={hasProducts}>
            <lightning-datatable
                key-field="id"
                data={products}
                columns={columns}
                hide-checkbox-column>
            </lightning-datatable>
        </template>

        <!-- Affiche le message si aucun produit n'est disponible -->
        <template if:true={isProductListEmpty}>
            <div class="slds-var-p-around_medium">
                <p>Vous n'avez aucune ligne de produits pour le moment.</p>
                <p>1. Veuillez sélectionner tout d'abord un catalogue (Pricebook).</p>
                <p>2. Sélectionnez ensuite les produits à ajouter.</p>
            </div>
        </template>
    </lightning-card>
</template>
